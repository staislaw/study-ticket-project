(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3303:function(e,t,r){Promise.resolve().then(r.bind(r,8060))},8060:function(e,t,r){"use strict";r.r(t),r.d(t,{api:function(){return C},default:function(){return g},selectDirectionDate:function(){return j}});var i=r(7437),a=r(8518),n=r.n(a),s=r(2265),l=r(1464),u=r.n(l),c=r(6648),d={src:"/_next/static/media/arrowButton.02b6e4cb.svg",height:1365,width:1365,blurWidth:0,blurHeight:0};function o(e){let{setShowSameCitiesAlert:t,setSelectDirectionForm:r,setPartNumber:a}=e,[n,l]=(0,s.useState)(C.cities[0].name),[o,m]=(0,s.useState)(C.cities[1].name),[p,v]=(0,s.useState)(j(1));return(0,i.jsxs)("form",{className:u().searchForm,onSubmit:e=>{e.preventDefault(),n===o?t(!0):t(!1),r({departureCity:e.target[0].value,arriveCity:e.target[1].value,date:e.target[2].value}),a(0)},children:[(0,i.jsx)(h,{value:n,handleChange:l,name:"departure"}),(0,i.jsx)(c.default,{src:d,width:15,height:15,onClick:function(){l(o),m(n)},priority:"low",alt:"replace items"}),(0,i.jsx)(h,{value:o,handleChange:m,name:"arrive"}),(0,i.jsx)("input",{type:"date",value:p,onChange:e=>v(e.target.value)}),(0,i.jsx)("button",{children:"Найти"})]})}function h(e){let{value:t,handleChange:r,name:a}=e;return(0,i.jsx)("select",{value:t,onChange:e=>r(e.target.value),name:a,children:C.cities.map(e=>(0,i.jsx)("option",{value:e.name,children:e.title},e.id))})}function m(){return(0,i.jsx)("div",{className:u().warningAlert,children:(0,i.jsx)("h3",{children:"Вы выбрали одинаковые города для вылета и прилёта"})})}var p=r(6297),v=r.n(p),_=r(7138);function f(e){let{selectDirectionForm:t,showSameCitiesAlert:r,partNumber:a,setPartNumber:n}=e,s=C.routes.filter(e=>{let r=C.cities.find(t=>e.departureCityId===t.id).name,i=C.cities.find(t=>e.arriveCityId===t.id).name;return r===t.departureCity&&i===t.arriveCity&&e.flightDates.find(e=>e===t.date)}),l=s.length>3&&s.length>(a+1)*3,u=(l?s.slice(0*(a+1),3*(a+1)):s).map(e=>(0,i.jsx)("li",{className:v().ticketInformation,children:(0,i.jsx)(_.default,{href:"/route/"+e.routeNumber,children:(0,i.jsxs)("div",{className:v().infoBlock,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:[" Отправление в ",(0,i.jsx)("br",{})," ",e.departureTime]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("br",{}),"Из г. ",C.cities.find(t=>t.id===e.departureCityId).title]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["В пути: ",e.travelDuration]}),(0,i.jsx)("br",{}),(0,i.jsxs)("button",{className:v().buyTicket,children:["Купить билет | ",e.price," ₽"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["Прибытие в ",(0,i.jsx)("br",{})," ",e.arriveTime]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("br",{}),"В г. ",C.cities.find(t=>t.id===e.arriveCityId).title]})]})]})})},e.routeNumber));return u.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{children:u}),l&&(0,i.jsx)("button",{onClick:function(){n(a+1)},children:"Показать ещё"})]}):r?void 0:(0,i.jsx)(x,{})}function x(){return(0,i.jsx)("div",{className:v().warningAlert,children:(0,i.jsx)("h3",{children:"Билеты не найдены"})})}function g(){let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)({departureCity:null,arriveCity:null,date:null}),[l,u]=(0,s.useState)(0);return(0,i.jsxs)("div",{className:n().center,children:[(0,i.jsx)(b,{}),(0,i.jsx)(o,{setShowSameCitiesAlert:t,setSelectDirectionForm:a,setPartNumber:u}),e&&(0,i.jsx)(m,{}),r.departureCity&&(0,i.jsx)(f,{selectDirectionForm:r,showSameCitiesAlert:e,partNumber:l,setPartNumber:u})]})}let j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=new Date(new Date().getTime()+864e5*e),r=t.getDate();r<10&&(r="0"+r);var i=t.getMonth()+1;return i<10&&(i="0"+i),t.getFullYear()+"-"+i+"-"+r},C={cities:[{id:2,name:"moscow",title:"Москва"},{id:3,name:"saintPetersburg",title:"Санкт-Петерург"},{id:4,name:"ekaterinburg",title:"Екатеринбург"}],routes:[{routeNumber:34,departureCityId:2,arriveCityId:3,price:3100,departureTime:"08:00",arriveTime:"10:15",travelDuration:"3ч 15м",flightDates:[j(0),j(1),j(2)]},{routeNumber:35,departureCityId:2,arriveCityId:3,price:3200,departureTime:"08:00",arriveTime:"10:15",travelDuration:"3ч 15м",flightDates:[j(0),j(1),j(2)]},{routeNumber:36,departureCityId:2,arriveCityId:3,price:4200,departureTime:"08:00",arriveTime:"10:15",travelDuration:"3ч 15м",flightDates:[j(0),j(1),j(2)]},{routeNumber:37,departureCityId:2,arriveCityId:3,price:10500,departureTime:"20:15",arriveTime:"22:00",travelDuration:"1ч 45м",flightDates:[j(1)]},{routeNumber:38,departureCityId:3,arriveCityId:4,price:4100,departureTime:"20:15",arriveTime:"22:00",travelDuration:"1ч 45м",flightDates:[j(1)]},{routeNumber:39,departureCityId:4,arriveCityId:2,price:7e3,departureTime:"10:00",arriveTime:"10:15",travelDuration:"15м",flightDates:[j(0),j(1),j(2)]}]};function b(){return(0,i.jsx)("div",{className:n().description,children:(0,i.jsx)("h2",{children:"Купить билет на самолёт"})})}},1464:function(e){e.exports={searchForm:"SelectDirection_searchForm__Q_eJ_",warningAlert:"SelectDirection_warningAlert__ulHw_"}},6297:function(e){e.exports={ticketInformation:"SelectedTicketsList_ticketInformation__QI8xy",infoBlock:"SelectedTicketsList_infoBlock__pBe1P",buyTicket:"SelectedTicketsList_buyTicket__YYmOl",warningAlert:"SelectedTicketsList_warningAlert__MzOQ3"}},8518:function(e){e.exports={description:"page_description__lvaOp",code:"page_code__9AfUJ",card:"page_card__Cf__u",center:"page_center__NcdcW",logo:"page_logo__ikIZE",departure:"page_departure__iRwxL",rotate:"page_rotate__xIioM"}}},function(e){e.O(0,[486,974,971,23,744],function(){return e(e.s=3303)}),_N_E=e.O()}]);