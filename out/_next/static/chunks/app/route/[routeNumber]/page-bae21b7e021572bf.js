(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{223:function(e,t,r){Promise.resolve().then(r.bind(r,6056)),Promise.resolve().then(r.bind(r,8060))},6056:function(e,t,r){"use strict";r.d(t,{default:function(){return h}});var i=r(7437),n=r(8060),a=r(3849),s=r.n(a),l=r(2265),c=r(7138),u=r(8622),d=r.n(u);function o(e){let{fullName:t,setFullName:r,route:n}=e,[a,s]=(0,l.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(!0)},children:[(0,i.jsxs)("label",{children:["Ваше ФИО: \xa0",(0,i.jsx)("input",{type:"text",name:"fullName",value:t,onChange:e=>r(e.target.value),required:!0})]}),(0,i.jsxs)("button",{className:d().buyTicket,children:["Купить за ",n.price," руб."]})]}),a&&(0,i.jsx)(function(){return(0,i.jsx)("div",{className:d().warningAlert,children:(0,i.jsx)("h3",{children:"Билет куплен!"})})},{})]})}function h(e){let{params:t}=e,[r,a]=(0,l.useState)("fake name"),u=n.api.routes.find(e=>t.routeNumber==e.routeNumber);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.default,{href:"/",className:s().enterMainPage,children:"Перейти на главную"}),(0,i.jsx)("ul",{children:(0,i.jsx)("li",{className:s().ticketInfo,children:(0,i.jsxs)("div",{className:s().infoBlock,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:[" Отправление в ",(0,i.jsx)("br",{})," ",u.departureTime]}),(0,i.jsxs)("span",{children:[" ",(0,i.jsx)("br",{}),"Из г. ",n.api.cities.find(e=>e.id===u.departureCityId).title]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["В пути: ",u.travelDuration]})," ",(0,i.jsx)("br",{})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["Прибытие в ",(0,i.jsx)("br",{})," ",u.arriveTime]}),(0,i.jsxs)("span",{children:[" ",(0,i.jsx)("br",{}),"В г. ",n.api.cities.find(e=>e.id===u.arriveCityId).title]})]})]})})}),(0,i.jsx)(o,{fullName:r,route:u,setFullName:a})]})}},8060:function(e,t,r){"use strict";r.r(t),r.d(t,{api:function(){return b},default:function(){return _},selectDirectionDate:function(){return g}});var i=r(7437),n=r(8518),a=r.n(n),s=r(2265),l=r(1464),c=r.n(l),u=r(6648),d={src:"/_next/static/media/arrowButton.02b6e4cb.svg",height:1365,width:1365,blurWidth:0,blurHeight:0};function o(e){let{setShowSameCitiesAlert:t,setSelectDirectionForm:r,setPartNumber:n}=e,[a,l]=(0,s.useState)(b.cities[0].name),[o,m]=(0,s.useState)(b.cities[1].name),[p,x]=(0,s.useState)(g(1));return(0,i.jsxs)("form",{className:c().searchForm,onSubmit:e=>{e.preventDefault(),a===o?t(!0):t(!1),r({departureCity:e.target[0].value,arriveCity:e.target[1].value,date:e.target[2].value}),n(0)},children:[(0,i.jsx)(h,{value:a,handleChange:l,name:"departure"}),(0,i.jsx)(u.default,{src:d,width:15,height:15,onClick:function(){l(o),m(a)},priority:"low",alt:"replace items"}),(0,i.jsx)(h,{value:o,handleChange:m,name:"arrive"}),(0,i.jsx)("input",{type:"date",value:p,onChange:e=>x(e.target.value)}),(0,i.jsx)("button",{children:"Найти"})]})}function h(e){let{value:t,handleChange:r,name:n}=e;return(0,i.jsx)("select",{value:t,onChange:e=>r(e.target.value),name:n,children:b.cities.map(e=>(0,i.jsx)("option",{value:e.name,children:e.title},e.id))})}function m(){return(0,i.jsx)("div",{className:c().warningAlert,children:(0,i.jsx)("h3",{children:"Вы выбрали одинаковые города для вылета и прилёта"})})}var p=r(6297),x=r.n(p),f=r(7138);function j(e){let{selectDirectionForm:t,showSameCitiesAlert:r,partNumber:n,setPartNumber:a}=e,s=b.routes.filter(e=>{let r=b.cities.find(t=>e.departureCityId===t.id).name,i=b.cities.find(t=>e.arriveCityId===t.id).name;return r===t.departureCity&&i===t.arriveCity&&e.flightDates.find(e=>e===t.date)}),l=s.length>3&&s.length>(n+1)*3,c=(l?s.slice(0*(n+1),3*(n+1)):s).map(e=>(0,i.jsx)("li",{className:x().ticketInformation,children:(0,i.jsx)(f.default,{href:"/route/"+e.routeNumber,children:(0,i.jsxs)("div",{className:x().infoBlock,children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:[" Отправление в ",(0,i.jsx)("br",{})," ",e.departureTime]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("br",{}),"Из г. ",b.cities.find(t=>t.id===e.departureCityId).title]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["В пути: ",e.travelDuration]}),(0,i.jsx)("br",{}),(0,i.jsxs)("button",{className:x().buyTicket,children:["Купить билет | ",e.price," ₽"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:["Прибытие в ",(0,i.jsx)("br",{})," ",e.arriveTime]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("br",{}),"В г. ",b.cities.find(t=>t.id===e.arriveCityId).title]})]})]})})},e.routeNumber));return c.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{children:c}),l&&(0,i.jsx)("button",{onClick:function(){a(n+1)},children:"Показать ещё"})]}):r?void 0:(0,i.jsx)(v,{})}function v(){return(0,i.jsx)("div",{className:x().warningAlert,children:(0,i.jsx)("h3",{children:"Билеты не найдены"})})}function _(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)({departureCity:null,arriveCity:null,date:null}),[l,c]=(0,s.useState)(0);return(0,i.jsxs)("div",{className:a().center,children:[(0,i.jsx)(C,{}),(0,i.jsx)(o,{setShowSameCitiesAlert:t,setSelectDirectionForm:n,setPartNumber:c}),e&&(0,i.jsx)(m,{}),r.departureCity&&(0,i.jsx)(j,{selectDirectionForm:r,showSameCitiesAlert:e,partNumber:l,setPartNumber:c})]})}let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=new Date(new Date().getTime()+864e5*e),r=t.getDate();r<10&&(r="0"+r);var i=t.getMonth()+1;return i<10&&(i="0"+i),t.getFullYear()+"-"+i+"-"+r},b={cities:[{id:2,name:"moscow",title:"Москва"},{id:3,name:"saintPetersburg",title:"Санкт-Петерург"},{id:4,name:"ekaterinburg",title:"Екатеринбург"}],routes:[{routeNumber:34,departureCityId:2,arriveCityId:3,price:3100,departureTime:"08:00",arriveTime:"10:15",travelDuration:"3ч 15м",flightDates:[g(0),g(1),g(2)]},{routeNumber:35,departureCityId:2,arriveCityId:3,price:3200,departureTime:"08:00",arriveTime:"10:15",travelDuration:"3ч 15м",flightDates:[g(0),g(1),g(2)]},{routeNumber:36,departureCityId:2,arriveCityId:3,price:4200,departureTime:"08:00",arriveTime:"10:15",travelDuration:"3ч 15м",flightDates:[g(0),g(1),g(2)]},{routeNumber:37,departureCityId:2,arriveCityId:3,price:10500,departureTime:"20:15",arriveTime:"22:00",travelDuration:"1ч 45м",flightDates:[g(1)]},{routeNumber:38,departureCityId:3,arriveCityId:4,price:4100,departureTime:"20:15",arriveTime:"22:00",travelDuration:"1ч 45м",flightDates:[g(1)]},{routeNumber:39,departureCityId:4,arriveCityId:2,price:7e3,departureTime:"10:00",arriveTime:"10:15",travelDuration:"15м",flightDates:[g(0),g(1),g(2)]}]};function C(){return(0,i.jsx)("div",{className:a().description,children:(0,i.jsx)("h2",{children:"Купить билет на самолёт"})})}},8622:function(e){e.exports={buyTicket:"PurchaseTicketForm_buyTicket__DJwmN"}},1464:function(e){e.exports={searchForm:"SelectDirection_searchForm__Q_eJ_",warningAlert:"SelectDirection_warningAlert__ulHw_"}},6297:function(e){e.exports={ticketInformation:"SelectedTicketsList_ticketInformation__QI8xy",infoBlock:"SelectedTicketsList_infoBlock__pBe1P",buyTicket:"SelectedTicketsList_buyTicket__YYmOl",warningAlert:"SelectedTicketsList_warningAlert__MzOQ3"}},3849:function(e){e.exports={enterMainPage:"TicketRegistration_enterMainPage__RpH1e",ticketInfo:"TicketRegistration_ticketInfo__0L5fN",infoBlock:"TicketRegistration_infoBlock__CfwAt",warningAlert:"TicketRegistration_warningAlert__Wf7O_"}},8518:function(e){e.exports={description:"page_description__lvaOp",code:"page_code__9AfUJ",card:"page_card__Cf__u",center:"page_center__NcdcW",logo:"page_logo__ikIZE",departure:"page_departure__iRwxL",rotate:"page_rotate__xIioM"}}},function(e){e.O(0,[486,974,971,23,744],function(){return e(e.s=223)}),_N_E=e.O()}]);